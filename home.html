<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="home.css">
</head>

<body>

    <canvas id="c" style="width:100%"></canvas>
    <div class="bdwish">HAPPY BIRTHDAY SANA!!!</div>

    <div class="cake">
        <div class="plate"></div>
        <div class="layer layer-bottom-1"></div>

        <div class="layer layer-bottom"></div>
        
        <div class="layer layer-middle"></div>
        <div class="layer layer-top"></div>
        <div class="icing"></div>
        <div class="drip drip1"></div>
        <div class="drip drip2"></div>
        <div class="drip drip3"></div>

        <div class="candle">
            <div class="flame" id="flame1"></div>
        </div>
        <div class="candle" style="left: 75px;">
            <div class="flame" id="flame2"></div>
        </div>
        <div class="candle" style="left: 175px;">
            <div class="flame" id="flame3"></div>
        </div>
        <div class="candle" style="left: 150px; top: 25px;">
            <div class="flame" id="flame4"></div>
        </div>
        <div class="candle" style="left: 210px; top: 10px;">
            <div class="flame" id="flame5"></div>
        </div>
        <div class="candle" style="left: 100px; top: 25px;">
            <div class="flame" id="flame6"></div>
        </div>
        <div class="candle" style="left: 45px; top: 10px;">
            <div class="flame" id="flame7"></div>
        </div>


    </div>



  <div class="bdmsg" >
    <h4>Hover over the card</h4>
    <div class="birthdayCard">
      <div class="cardFront">
        <div class="front-text">
          <h3 class="happy">HAPPY</h3>
          <h2 class="bday">BIRTHDAY</h2> 
          <h3 class="toyou">to you!</h3>  
        </div>
        <div class="plate_card">
          <img src="images/IMG_3806-removebg-preview.png"/>
        </div>
      </div>
        
        <div class="cardInside">
           <div class="inside-text">
              <h3 class="happy">HAPPY</h3>
              <h2 class="bday">BIRTHDAY</h2> 
              <h3 class="toyou">to you!</h3>  
            </div>
          <div class="wishes">
          <p>Dear Sana,</p>
          <p>A Veryyyyy Happpyyyy Birthdayy to Youu!! I hope your day is filled with lots of 
            love and laughter! You r one of the bestestt person I've ever met and I am so 
            grateful to have you my friend. You are a very loveable, cute and adorable and yes clumsy person.
            (yea yea smart and genuis and all also, but those other qualities I don't get to say that often uk)
          </p>
          <p>You my friend, are destined for many great things! and we both know that. And I'll always pray you 
            achieve those great milestones. Ik u r a person who won't ask for anything v easily 
          but whenever u need a friend, or someone to vent to, or someone to assist with something, 
          or be it anythinggg elseeee...</p>
          <p>I'll be there for you!</p>
          <p>I hope you enjoy ur day to your fullest. I remember u saying sometimes how u wish u 
            were someone's priority, but my friend, YOU ARE A PRIORITY. 
          </p>
          <p>U have achieved a lot 
            my friend and I am so proud of you! Always keep going and soar high in the sky. And stay how u r, admirable, smart and 
            DEADLYY!(Yea u r not deadly, but might be interesing to see a deadly sana uk, just dont't 
            be deadly to me :(, and im no good with bd wishes either, so just bear it))
          </p>
          <p class="name">        ~Fardeen</p>
          </div>
        </div>
      </div>

  </div>

  <div class="memories">
    <h1>Favorite Memories</h1>
    <link href='https://fonts.googleapis.com/css?family=Cedarville+Cursive' rel='stylesheet' type='text/css'>

    <div id="background">
      <div id="gallery">
        <figure class="pic1">
          <div class="card-content">
            <p1>Before u came at the table, i was just admiring that what a breathtaking
              view i can see from the window in this lovely lounge, but it was until I saw
              u approaching the table, I then realized what breathtaking actually looks 
              like. A part of my brain my was just talking someting something with u, and other part
             just deciding what should I compliment u with cos any word i thought of just 
            didn't seemed enough to describe how u looked I swear!. Annndd in the end..I just ended 
          up saying nothing...I am soo dumb smh. You looked absolute pretty!</p1>
          </div>
          <img src="images/IMG_4337.jpg" />
          <figcaption>Breathtaking</figcaption>
        </figure>
        <figure class="pic2">
          <div class="card-content">
            <p1>Spending time with u in AYA was just..the best part of my dubai trip. Actually 
              that whole day was the best part of the whole trip. Every moment I experienced there 
              is imprinted in my memories.
            </p1>
          </div>
          <img src="images/IMG_3262.jpg" />
          <figcaption>The Best Part</figcaption>
        </figure>
        <figure class="pic3">
          <div class="card-content">
            <p1>Yeaa ik, normally no one arranges a date just too early in the morning, especially
              when the other person is not a morning person.... 
              but there was just no other option uk. The onllyyyy thing which I didn't like 
            was how stupid pics that waiter took of us! Coud have taken better but idk what 
          was he trying to do by swinging phone here and there and capturing weird photos. I just 
        wish we had more better photos..</p1>
          </div>
          <img src="images/IMG_4339.jpg" />
          <figcaption>Early morning</figcaption>
        </figure>
        <figure class="pic4">
          <div class="card-content">
            <p1>Mahnn did u actually thought that idk how to make coffee in that machine? 
              Actually yea, u r right, i didn't knew properly to make..BUTTTT..then I 
            thought what could be more better than to get sana make the coffee, huh? Aint 
          I a genius? ik i am, thanks. Tbh it was avgerage tho, come on, ik ik I dont know to 
        make only, who am i to say u, but it was fun tho</p1>
          </div>
          <img src="images/IMG_4336.jpg" />
          <figcaption>Avg. Tea</figcaption>
        </figure>
        <figure class="pic5">
          <div class="card-content">
            <p1>I legit wanted to get u a bouquet of it but my intrusive thoughts mahnn! 
              Somewhere between while getting those for u I was just worried ki will u 
              take it or not. Cos the last time i remebered giving a flower to sana just made 
              me feel soo stupid(cos yea, u didnt even accepted it even after how much i tried
              to give u) and now when giving a bouquet, I thought u would have denied again.
              And upon that, it would also have been an expensive gift, and being expensive 
              I thought u wont accept it either.
              But now no worries...next time on ur bd, I shall get u a bouquet ma'am.
            </p1>
          </div>
          <img src="images/IMG_3320.JPG" />
          <figcaption>#Tulips</figcaption>
        </figure>
        <figure class="pic6">
          <div class="card-content">
            <p1>Ummm yeaa..maybe the most awkward part of the trip. I mean come on, what can be 
              more awkward than falling for that one girl again and again and confessing it..but 
              then also being rejected again and again...well that's a story for some other day.
              What i wanted to say was ki enjoying the sunset with u just felt like a moment that 
              I wish if could have paused the time right there. And yea, u r right, and I will always 
              wish the best for u, and that u may achieve ur goals and be successful in life! 
            </p1>
            </p1>
          </div>
          <img src="images/IMG_4338.jpg" />
          <figcaption>The Sunset</figcaption>
        </figure>
        <figure class="pic7">
          <div class="card-content">
            <p1>
              I loved ur gifts and I'm gonna chreish this for soo long, and ik u said ki complete the mask but....i can't. I tried 
              and I just wasn't able to make myself do it. Ig it's better i just leave it uk,
              cos well it just might give me the reason to come dubai again to meet and to 
              complete it with u sana. Hope to see u soon again my friend! And yea happyy birthdayyy!!
              (Also btw the mask is just too small for my face, maybe next time remember that 
              my face is bigger than yours hun)
            </p1>
          </div>
          <img src="images/IMG_3889.JPG" />
          <figcaption>Maybe Next Time?</figcaption>
        </figure>
        
      </div>
    </div>
  </div>
  <div class="northLMsg">
    <h1>And now, time to enjoy the The Northern Lights with some karak! Shall we San-o-rita?</h1>
    <h2>Ignore the karak, i didnt knew how to animate one into the page</h2>
  </div>

  <div class="northernLights">
    <div class="cartoons">
      <img src="images/cartoons.png">
      
    </div>
    <div id="cam_container">
      <video autoplay="true" id="videoElement">
      
      </video>
    </div>

    <div id="cbwrap">
      <!-- (A) SPEECH BUBBLES -->
      <div class="speech fard" id="speech_fard">Looks beautiful, doesn't it!</div>
      <div class="speech san" id="speech_san">Yee</div>
      <button class="button" onclick="change_msg()">keep clicking</button>
  </div>

  </div>


<div class="endingMsgs">
<h1>Ladies and Gentlemen, Sana indeed cut off mini Fardeen's hands!</h1>
<h1> </h1>
<h1> </h1>
<h1> </h1>
<h1>Nah just kidding, who u think coded this? Mini Fardeen did help to code this</h1>
<h1> </h1>
<h1> </h1>
<h1> </h1>
</div>

<div class="frworks">
<h1>But anyways, now we come to an end</h1>

<h2>Once again Sana, a very happy birthdayyy to you! I wish u were in India, I bet I would 
  have made ur bd a memorable day. But that's fine lyt. If u ever get a chance to come India, then come tho,
  I loved hanging out with u in dubai, and I loveee to do it again and also bcos once I go US, idk when will I 
  ever get chance toa also uk..
</h2>
<h2></h2>
<h2></h2>
<h2>You deserve all the love, success and happiness that the world has to offer, Enjoy ur day, have fun, ig i have done too much now, should just stop it. I hope u liked
  it my friend. Let me know below how was it, was there something missing or bad or anything,
so ur next bd pey, ill make a better one!</h2>
<h2>Byee!‚ù§Ô∏è</h2>
<h3>(click anywhere on screen to have fireworks there!)</h3>
<canvas id="birthday"></canvas>

<div class='fb-form'>
  <form action='#' class='form-group'>

    <textarea class='form-control' id='fb-comment' placeholder="‚ö†Ô∏èActuallyy, I tried a lot to implement this but i wasnt able to, so pls reply back to my mail or whatsapp me ki how was it, sorry‚ö†Ô∏è"></textarea>

    <input class='form-control btn btn-primary' id="sub_btn" type='submit'>
  </form>
</div>
</div>


</div>





</body>





<script>
    var c = document.getElementById("c");
var ctx = c.getContext("2d");

var bc = document.createElement("canvas");
var bCtx = bc.getContext("2d");

var cw = c.width = bc.width = window.innerWidth,
  cx = cw / 2;
var ch = c.height = bc.height = window.innerHeight + 100,
  cy = ch;

var frames = 0;
var requestId = null;
var rad = (Math.PI / 180);
var kappa = 0.5522847498;

var x, y;
bCtx.strokeStyle = "#abcdef";
bCtx.lineWidth = 1;

var balloons = [];

function Balloon() {
  this.r = randomIntFromInterval(20, 70);
  this.R = 1.4 * this.r;
  this.x = randomIntFromInterval(this.r, cw - this.r);
  this.y = ch + 2 * this.r;
  this.a = this.r * 4.5;
  this.pm = Math.random() < 0.5 ? -1 : 1;
  this.speed = randomIntFromInterval(1.5, 4);
  this.k = this.speed / 5;
  this.hue = this.pm > 0 ? "210" : "10";
}

function Draw() {

  updateBallons(bCtx);

  ctx.clearRect(0, 0, cw, ch);
  var img = bc;
  ctx.drawImage(img, 0, 0);

  requestId = window.requestAnimationFrame(Draw);
}
//requestId = window.requestAnimationFrame(Draw);

function Init() {
  if (requestId) {
    window.cancelAnimationFrame(requestId);
    requestId = null;
  }
  cw = c.width = bc.width = window.innerWidth, cx = cw / 2;
  ch = c.height = bc.height = window.innerHeight + 100, cy = ch;
  bCtx.strokeStyle = "#abcdef";
  bCtx.lineWidth = 1;
  frames = 0;
  balloons = [];

  // Stop generating balloons after 10 seconds
  setTimeout(function () {
    if (requestId) {
      window.cancelAnimationFrame(requestId);
      requestId = null;
      ctx.clearRect(0, 0, cw, ch);
    }
  }, 16000);

  Draw();
  
}


window.addEventListener('resize', Init, false);


function updateBallons(ctx) {
  frames += 1;
  if (frames % 37 == 0 && balloons.length < 37) {
    var balloon = new Balloon();
    balloons.push(balloon);
  }
  ctx.clearRect(0, 0, cw, ch);

  for (var i = 0; i < balloons.length; i++) {
    var b = balloons[i];
    if (b.y > -b.a) {
      b.y -= b.speed
    } else {
      b.y = parseInt(ch + b.r + b.R);
    }

    var p = thread(b, ctx);
    b.cx = p.x;
    b.cy = p.y - b.R;
    ctx.fillStyle = Grd(p.x, p.y, b.r, b.hue)
    drawBalloon(b, ctx);
  }
}

function drawBalloon(b, ctx) {

  var or = b.r * kappa; // offset

  var p1 = {
    x: b.cx - b.r,
    y: b.cy
  }
  var pc11 = {
    x: p1.x,
    y: p1.y + or
  }
  var pc12 = {
    x: p1.x,
    y: p1.y - or
  }

  var p2 = {
    x: b.cx,
    y: b.cy - b.r
  }
  var pc21 = {
    x: b.cx - or,
    y: p2.y
  }
  var pc22 = {
    x: b.cx + or,
    y: p2.y
  }

  var p3 = {
    x: b.cx + b.r,
    y: b.cy
  }
  var pc31 = {
    x: p3.x,
    y: p3.y - or
  }
  var pc32 = {
    x: p3.x,
    y: p3.y + or
  }

  var p4 = {
    x: b.cx,
    y: b.cy + b.R
  };
  var pc41 = {
    x: p4.x + or,
    y: p4.y
  }
  var pc42 = {
    x: p4.x - or,
    y: p4.y
  }

  var t1 = {
    x: p4.x + .2 * b.r * Math.cos(70 * rad),
    y: p4.y + .2 * b.r * Math.sin(70 * rad)
  }
  var t2 = {
    x: p4.x + .2 * b.r * Math.cos(110 * rad),
    y: p4.y + .2 * b.r * Math.sin(110 * rad)
  }

  //balloon
  ctx.beginPath();
  ctx.moveTo(p4.x, p4.y);
  ctx.bezierCurveTo(pc42.x, pc42.y, pc11.x, pc11.y, p1.x, p1.y);
  ctx.bezierCurveTo(pc12.x, pc12.y, pc21.x, pc21.y, p2.x, p2.y);
  ctx.bezierCurveTo(pc22.x, pc22.y, pc31.x, pc31.y, p3.x, p3.y);
  ctx.bezierCurveTo(pc32.x, pc32.y, pc41.x, pc41.y, p4.x, p4.y);
  //knot
  ctx.lineTo(t1.x, t1.y);
  ctx.lineTo(t2.x, t2.y);
  ctx.closePath();
  ctx.fill();
}

function thread(b, ctx) {
  ctx.beginPath();

  for (var i = b.a; i > 0; i -= 1) {
    var t = i * rad;
    x = b.x + b.pm * 50 * Math.cos(b.k * t - frames * rad)
    y = b.y + b.pm * 25 * Math.sin(b.k * t - frames * rad) + 50 * t
    ctx.lineTo(x, y)
  }
  ctx.stroke();
  return p = {
    x: x,
    y: y
  }
}

function Grd(x, y, r, hue) {
  grd = ctx.createRadialGradient(x - .5 * r, y - 1.7 * r, 0, x - .5 * r, y - 1.7 * r, r);
  grd.addColorStop(0, 'hsla(' + hue + ',100%,65%,.95)');
  grd.addColorStop(0.4, 'hsla(' + hue + ',100%,45%,.85)');
  grd.addColorStop(1, 'hsla(' + hue + ',100%,25%,.80)');
  return grd;
}

function randomIntFromInterval(mn, mx) {
  return ~~(Math.random() * (mx - mn + 1) + mn);
}


document.addEventListener("DOMContentLoaded", () => {
  const flames = document.querySelectorAll(".flame");

  // Initialize an array to keep track of the blown state for each flame
  const isBlownArray = Array.from({ length: flames.length }, () => false);

  navigator.mediaDevices.getUserMedia({ audio: true })
      .then((stream) => {
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          const microphone = audioContext.createMediaStreamSource(stream);
          const analyser = audioContext.createAnalyser();

          // Connect the microphone to the analyser
          microphone.connect(analyser);

          // Set up the analyser
          analyser.fftSize = 256;
          const bufferLength = analyser.frequencyBinCount;
          const dataArray = new Uint8Array(bufferLength);

          // Function to check audio input and blow the flames
          function checkAudioInput() {
              analyser.getByteFrequencyData(dataArray);
              const average = dataArray.reduce((acc, val) => acc + val, 0) / bufferLength;

              // Adjust the threshold value based on your preferences
              const threshold = 170;

              flames.forEach((flame, index) => {
                  if (average > threshold && !isBlownArray[index]) {
                      // Set the blown state to true
                      isBlownArray[index] = true;

                      // Add the blowing class to trigger the blow animation
                      flame.classList.add("blowing");

                      // Set the opacity to 0 after the blow animation completes
                      setTimeout(() => {
                          flame.style.opacity = 0;
                      }, 1000);
                  }
              });

              // Recursive call to continuously check the audio input
              requestAnimationFrame(checkAudioInput);
          }

          // Start checking the audio input
          checkAudioInput();
      })
      .catch((error) => {
          console.error('Error accessing microphone:', error);
      });
});

var video = document.querySelector("#videoElement");

if (navigator.mediaDevices.getUserMedia) {
  navigator.mediaDevices.getUserMedia({ video: true })
    .then(function (stream) {
      video.srcObject = stream;
    })
    .catch(function (err0r) {
      console.log("Something went wrong!");
    });
}

onload = () => {
  const c = setTimeout(() => {
    document.body.classList.remove("not-loaded");
    clearTimeout(c);
  }, 1000);
};
const texts = ["ok..but they not as beautiful as u",
            "hehe, ik, thanks(sana never compliments back btw)",
            "Can we hold hands..?",
            "NOOOOOO!!!",
            "...oküíî",
            "how many times I have said no, SMH!",
            "uhmm..",
            "I'll cut ur hands only wait, then ask to hold",
            "...ouch, fine wont ask u",
            "Yee, U shoo! Let me enjoy the lights",
            ];
        let currentIndex = 0;
        let sanIndex = 1;
function change_msg(){
    const textElementFard = document.getElementById("speech_fard");
    const textElementSan = document.getElementById("speech_san");
    currentIndex = (currentIndex + 2) % texts.length;
    sanIndex = (sanIndex + 2) % texts.length;

    textElementFard.textContent = texts[currentIndex];
    textElementSan.textContent = texts[sanIndex];
}



// helper functions
const PI2 = Math.PI * 2
const random = (min, max) => Math.random() * (max - min + 1) + min | 0
const timestamp = _ => new Date().getTime()

// container
class Birthday {
  constructor() {
    this.resize()

    // create a lovely place to store the firework
    this.fireworks = []
    this.counter = 0

  }
  
  resize() {
    this.width = canvas1.width = window.innerWidth
    let center = this.width / 2 | 0
    this.spawnA = center - center / 4 | 0
    this.spawnB = center + center / 4 | 0
    
    this.height = canvas1.height = window.innerHeight
    this.spawnC = this.height * .1
    this.spawnD = this.height * .5
    
  }
  
  onClick(evt) {
     let x = evt.clientX || evt.touches && evt.touches[0].pageX
     let y = evt.clientY || evt.touches && evt.touches[0].pageY
     
     let count = random(3,5)
     for(let i = 0; i < count; i++) this.fireworks.push(new Firework(
        random(this.spawnA, this.spawnB),
        this.height,
        x,
        y,
        random(0, 260),
        random(30, 110)))
          
     this.counter = -1
     
  }
  
  update(delta) {
    ctx1.globalCompositeOperation = 'hard-light'
    ctx1.fillStyle = `rgba(20,20,20,${ 7 * delta })`
    ctx1.fillRect(0, 0, this.width, this.height)

    ctx1.globalCompositeOperation = 'lighter'
    for (let firework of this.fireworks) firework.update(delta)

    // if enough time passed... create new new firework
    this.counter += delta * 3 // each second
    if (this.counter >= 1) {
      this.fireworks.push(new Firework(
        random(this.spawnA, this.spawnB),
        this.height,
        random(0, this.width),
        random(this.spawnC, this.spawnD),
        random(0, 360),
        random(30, 110)))
      this.counter = 0
    }

    // remove the dead fireworks
    if (this.fireworks.length > 1000) this.fireworks = this.fireworks.filter(firework => !firework.dead)

  }
}

class Firework {
  constructor(x, y, targetX, targetY, shade, offsprings) {
    this.dead = false
    this.offsprings = offsprings

    this.x = x
    this.y = y
    this.targetX = targetX
    this.targetY = targetY

    this.shade = shade
    this.history = []
  }
  update(delta) {
    if (this.dead) return

    let xDiff = this.targetX - this.x
    let yDiff = this.targetY - this.y
    if (Math.abs(xDiff) > 3 || Math.abs(yDiff) > 3) { // is still moving
      this.x += xDiff * 2 * delta
      this.y += yDiff * 2 * delta

      this.history.push({
        x: this.x,
        y: this.y
      })

      if (this.history.length > 20) this.history.shift()

    } else {
      if (this.offsprings && !this.madeChilds) {
        
        let babies = this.offsprings / 2
        for (let i = 0; i < babies; i++) {
          let targetX = this.x + this.offsprings * Math.cos(PI2 * i / babies) | 0
          let targetY = this.y + this.offsprings * Math.sin(PI2 * i / babies) | 0

          birthday.fireworks.push(new Firework(this.x, this.y, targetX, targetY, this.shade, 0))

        }

      }
      this.madeChilds = true
      this.history.shift()
    }
    
    if (this.history.length === 0) this.dead = true
    else if (this.offsprings) { 
        for (let i = 0; this.history.length > i; i++) {
          let point = this.history[i]
          ctx1.beginPath()
          ctx1.fillStyle = 'hsl(' + this.shade + ',100%,' + i + '%)'
          ctx1.arc(point.x, point.y, 1, 0, PI2, false)
          ctx1.fill()
        } 
      } else {
      ctx1.beginPath()
      ctx1.fillStyle = 'hsl(' + this.shade + ',100%,50%)'
      ctx1.arc(this.x, this.y, 1, 0, PI2, false)
      ctx1.fill()
    }

  }
}

let canvas1 = document.getElementById('birthday')
let ctx1 = canvas1.getContext('2d')

let then = timestamp()

let birthday = new Birthday
window.onresize = () => birthday.resize()
document.onclick = evt => birthday.onClick(evt)
document.ontouchstart = evt => birthday.onClick(evt)

  ;(function loop(){
  	requestAnimationFrame(loop)

  	let now = timestamp()
  	let delta = now - then

    then = now
    birthday.update(delta / 1000)
  	

  })()

</script>

</html>
